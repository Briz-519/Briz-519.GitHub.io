
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>çˆ¬è™«åˆä½“éªŒ-è±†ç“£250 | Briz&#39;s home of notes</title>
<meta name="description" content="This is a site I use to store my notes">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://briz-519.github.io/favicon.ico?v=1603975163789">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://briz-519.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://briz-519.github.io">
        <img class="avatar" src="https://briz-519.github.io/images/avatar.png?v=1603975163789" alt="" width="32px" height="32px">
      </a>
      <a href="https://briz-519.github.io">
        <h1 class="site-title">Briz&#39;s home of notes</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            å½’æ¡£
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            å…³äº
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://briz-519.github.io/post-images/pa-chong-chu-ti-yan.jpg')">
            </div>
          
          <h2 class="post-title">çˆ¬è™«åˆä½“éªŒ-è±†ç“£250</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-08-11</span>
            
          </div>
          <div class="post-content">
            <!-- more -->
<p>çˆ¬å–è±†ç“£250æ’è¡Œæ¦œæ•°æ®ğŸ¬</p>
<!-- more -->
<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>
<p>é¦–è¡Œå¡«å†™é˜²æ­¢ä¸­æ–‡ä¹±ç ï¼š#coding=utf-8</p>
<p>å¯åŠ å…¥mainå‡½æ•°ç”¨äºæµ‹è¯•ç¨‹åºï¼š</p>
<pre><code class="language-python">if __name__ ==&quot;__main__&quot;    #ç­‰åŒäºCè¯­è¨€ç­‰å…¶ä»–è¯­è¨€çš„ä¸»å‡½æ•°
</code></pre>
<p>å¼•å…¥æ¨¡å—ï¼š</p>
<blockquote>
<p>æœ¬è´¨ä¸º.pyæ–‡ä»¶ï¼Œç”¨äºæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå¯ä½¿ç”¨importæ¥å¯¼å…¥æ¨¡å—</p>
</blockquote>
<p>import sys ç³»ç»Ÿå‡½æ•°åº“</p>
<p>import bs4 ç½‘é¡µè§£æè·å–æ•°æ®</p>
<p>import sqlite3 è¿›è¡ŒSQLiteæ•°æ®åº“æ“ä½œ</p>
<p>import urllib.request,urllib.error åˆ¶å®šURLè·å–ç½‘é¡µæ•°æ®</p>
<p>import xlwt è¿›è¡ŒEXCELæ“ä½œ</p>
<p>import re æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ–‡å­—åŒ¹é…</p>
<blockquote>
<p><code>æ¨¡å— module</code>ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ˜¯ä¸€ä¸ªä»¥.pyä¸ºåç¼€çš„æ–‡ä»¶ã€‚ module å¯çœ‹ä½œä¸€ä¸ªå·¥å…·ç±»ï¼Œå¯å…±ç”¨æˆ–è€…éšè—ä»£ç ç»†èŠ‚ï¼Œå°†ç›¸å…³ä»£ç æ”¾ç½®åœ¨ä¸€ä¸ªmoduleä»¥ä¾¿è®©ä»£ç æ›´ å¥½ç”¨ã€æ˜“æ‡‚ï¼Œè®©coderé‡ç‚¹æ”¾åœ¨é«˜å±‚é€»è¾‘ä¸Šã€‚ moduleèƒ½å®šä¹‰å‡½æ•°ã€ç±»ã€å˜é‡ï¼Œä¹Ÿèƒ½åŒ…å«å¯æ‰§è¡Œçš„ä»£ç ã€‚moduleæ¥æºæœ‰3ç§ï¼š â‘ Pythonå†…ç½®çš„æ¨¡å—ï¼ˆæ ‡å‡†åº“ï¼‰ï¼› â‘¡ç¬¬ä¸‰æ–¹æ¨¡å—ï¼› â‘¢è‡ªå®šä¹‰æ¨¡å—ã€‚</p>
<p><code>åŒ… package</code>ï¼š ä¸ºé¿å…æ¨¡å—åå†²çªï¼ŒPythonå¼•å…¥äº†æŒ‰ç›®å½•ç»„ç»‡æ¨¡å—çš„æ–¹æ³•ï¼Œç§°ä¹‹ä¸º åŒ…ï¼ˆpackageï¼‰ã€‚åŒ… æ˜¯å«æœ‰Pythonæ¨¡å—çš„æ–‡ä»¶å¤¹ã€‚</p>
</blockquote>
<h3 id="urllibæ¨¡å—">urllibæ¨¡å—</h3>
<p>æ˜¯æœ€åŸºæœ¬çš„pythonå†…ç½®çš„ä¸€ä¸ªhttpè¯·æ±‚åº“ï¼Œä¸éœ€è¦é¢å¤–çš„å®‰è£…ã€‚åªéœ€è¦å…³æ³¨è¯·æ±‚çš„é“¾æ¥ï¼Œå‚æ•°ï¼Œæä¾›äº†å¼ºå¤§çš„è§£æåŠŸèƒ½</p>
<p><code>urllb.request è¯·æ±‚æ¨¡å—</code></p>
<p><code>urllib.error å¼‚å¸¸å¤„ç†æ¨¡å—</code></p>
<p><code>urllib.parse è§£ææ¨¡å—</code></p>
<p>ç®€å•çš„ä¸€ä¸ªgetè¯·æ±‚</p>
<pre><code class="language-python">import urllib.request     #å¼•å…¥åº“
reponse = urllib.request.urlopen('http://www.baidu.com') 
print(reponse.read().decode('utf-8'))    #decode(&quot;utf-8&quot;)å°†æ•°æ®è§£ç ä¸ºutf-8æ ¼å¼æ•°æ®
</code></pre>
<p>ç®€å•çš„ä¸€ä¸ªpostè¯·æ±‚</p>
<pre><code class="language-python">import urllib.parse
import urllib.request
data = bytes(urllib.parse.urlencode({'hello':'world'}),encoding='utf-8')
reponse = urllib.request.urlopen('http://httpbin.org/post',data=data)
print(reponse.read().decode('utf-8'))
</code></pre>
<p>è¶…æ—¶å¤„ç†</p>
<pre><code class="language-python">import urllib.request
try:
    response=urllib.request.urlopen(&quot;http://httpbin.org/get&quot;,timeout=0.01)    #è®¾ç½®è¶…æ—¶æ—¶é—´é˜²æ­¢æ— é™åŠ è½½
    print(response.read().decode(&quot;utf-8&quot;))
except urllib.error.URLError as e:
    print(&quot;Time out!&quot;)
</code></pre>
<pre><code class="language-python">import urllib.request
response = urllib.request.urlopen('http://www.baidu.com')
print(response.status) # çŠ¶æ€ç  åˆ¤æ–­è¯·æ±‚æ˜¯å¦æˆåŠŸ
print(response.getheaders()) # å“åº”å¤´ å¾—åˆ°çš„ä¸€ä¸ªå…ƒç»„ç»„æˆçš„åˆ—è¡¨
print(response.getheader('Server')) #å¾—åˆ°ç‰¹å®šçš„å“åº”å¤´
print(response.read().decode('utf-8')) #è·å–å“åº”ä½“çš„å†…å®¹ï¼Œå­—èŠ‚æµçš„æ•°æ®ï¼Œéœ€è¦è½¬æˆutf-8
æ ¼å¼
</code></pre>
<p>ç”±äºé€šè¿‡Pycharmè·å–ç½‘é¡µä¿¡æ¯ä¼šè¢«ç½‘ç«™çš„åçˆ¬è™«è¯†åˆ«ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¿®æ”¹hearersé‡Œçš„user-agentæ¥ä¼ªè£…æˆæµè§ˆå™¨å‘é€è¯·æ±‚</p>
<pre><code class="language-python">from urllib import request,parse
url=&quot;http://httpbin.org/post&quot;
data=bytes(urllib.parse.urlencode({&quot;name&quot;:&quot;Briz&quot;}),encoding=&quot;utf-8&quot;)
headers={&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.58&quot;}    
req=urllib.request.Request(url=url,headers=headers,data=data,method=&quot;POST&quot;)
response=urllib.request.urlopen(req)
print(response.read().decode(&quot;utf-8&quot;))

</code></pre>
<blockquote>
<p>è·å–user-agentæ–¹æ³•ï¼š</p>
</blockquote>
<blockquote>
<h6 id="urlopenæ–¹æ³•ä¸­çš„urlå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªrequestå¯¹è±¡">urlopen()æ–¹æ³•ä¸­çš„urlå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªRequestå¯¹è±¡</h6>
</blockquote>
<pre><code class="language-python">#urlå¯ä»¥æ˜¯å­—ç¬¦ä¸²
import urllib.request
resp = urllib.request.urlopen('http://www.baidu.com')
print(resp.read().decode('utf-8'))  # read()è·å–å“åº”ä½“çš„å†…å®¹ï¼Œå†…å®¹æ˜¯byteså­—èŠ‚æµï¼Œéœ€è¦è½¬æ¢æˆå­—ç¬¦ä¸²

##urlå¯ä»¥ä¹Ÿæ˜¯Requestå¯¹è±¡
import urllib.request
request = urllib.request.Request('http://httpbin.org')
response = urllib.request.urlopen(request)
print(response.read().decode('utf-8'))
</code></pre>
<h3 id="beautifulsoupæ¨¡å—">BeautifulSoupæ¨¡å—</h3>
<p>Beautiful Soup æ˜¯ä¸€ä¸ªHTML/XMLçš„è§£æå™¨ï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯å¦‚ä½•è§£æå’Œæå– HTML/XML æ•°æ®ã€‚</p>
<blockquote>
<p>BeautifulSoupæ”¯æŒPythonæ ‡å‡†åº“ä¸­çš„HTMLè§£æå™¨,è¿˜æ”¯æŒä¸€äº›ç¬¬ä¸‰æ–¹çš„è§£æå™¨ï¼Œå¦‚æœæˆ‘ä»¬ä¸å®‰è£…å®ƒï¼Œ åˆ™ Python ä¼šä½¿ç”¨ Pythoné»˜è®¤çš„è§£æå™¨ï¼Œlxml è§£æå™¨æ›´åŠ å¼ºå¤§ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œæ¨èä½¿ç”¨lxml è§£æå™¨ã€‚ Beautiful Soupè‡ªåŠ¨å°†è¾“å…¥æ–‡æ¡£è½¬æ¢ä¸ºUnicodeç¼–ç ï¼Œè¾“å‡ºæ–‡æ¡£è½¬æ¢ä¸ºutf-8ç¼–ç ã€‚ä½ ä¸éœ€è¦è€ƒè™‘ç¼–ç æ–¹ å¼ï¼Œé™¤éæ–‡æ¡£æ²¡æœ‰æŒ‡å®šä¸€ä¸ªç¼–ç æ–¹å¼ï¼Œè¿™æ—¶ï¼ŒBeautiful Soupå°±ä¸èƒ½è‡ªåŠ¨è¯†åˆ«ç¼–ç æ–¹å¼äº†ã€‚ç„¶åï¼Œä½ ä»…ä»…éœ€è¦è¯´æ˜ä¸€ä¸‹åŸå§‹ç¼–ç æ–¹å¼å°±å¯ä»¥äº†ã€‚</p>
</blockquote>
<p>åˆ›å»ºBeautifulSoup4å¯¹è±¡</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html,&quot;html.parser&quot;) # ç¼©è¿›æ ¼å¼
</code></pre>
<h4 id="beautifulsoup4å››å¤§å¯¹è±¡ç§ç±»">BeautifulSoup4å››å¤§å¯¹è±¡ç§ç±»</h4>
<p>BeautifulSoup4å°†å¤æ‚HTMLæ–‡æ¡£è½¬æ¢æˆä¸€ä¸ªå¤æ‚çš„æ ‘å½¢ç»“æ„,æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯Pythonå¯¹è±¡,æ‰€æœ‰å¯¹è±¡å¯ä»¥ å½’çº³ä¸º4ç§:</p>
<p><code>Tag</code></p>
<p><code>NavigableString</code></p>
<p><code>BeautifulSoup</code></p>
<p><code>Comment</code></p>
<h5 id="tag">Tag</h5>
<p>Tagé€šä¿—ç‚¹è®²å°±æ˜¯HTMLä¸­çš„ä¸€ä¸ªä¸ªæ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html,&quot;html.parser&quot;)

print(bs.title)# è·å–titleæ ‡ç­¾çš„æ‰€æœ‰å†…å®¹

print(bs.head)# è·å–headæ ‡ç­¾çš„æ‰€æœ‰å†…å®¹

print(bs.a)# è·å–ç¬¬ä¸€ä¸ªaæ ‡ç­¾çš„æ‰€æœ‰å†…å®¹

print(type(bs.a))# ç±»å‹
</code></pre>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ soup åŠ æ ‡ç­¾åè½»æ¾åœ°è·å–è¿™äº›æ ‡ç­¾çš„å†…å®¹ï¼Œè¿™äº›å¯¹è±¡çš„ç±»å‹æ˜¯bs4.element.Tagã€‚ä½†æ˜¯ï¼Œå®ƒæŸ¥æ‰¾çš„æ˜¯åœ¨æ‰€æœ‰å†…å®¹ä¸­çš„<code>ç¬¬ä¸€ä¸ª</code>ç¬¦åˆè¦æ±‚çš„æ ‡ç­¾(ä¸åŒ…æ‹¬è¢«æ³¨é‡Šçš„)ã€‚</p>
</blockquote>
<p>å¯¹äº Tagï¼Œå®ƒæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼Œæ˜¯ name å’Œ attrsï¼š</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html,&quot;html.parser&quot;)

print(bs.name)# [document] #bs å¯¹è±¡æœ¬èº«æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„ name å³ä¸º [document]

print(bs.head.name)# head #å¯¹äºå…¶ä»–å†…éƒ¨æ ‡ç­¾ï¼Œè¾“å‡ºçš„å€¼ä¾¿ä¸ºæ ‡ç­¾æœ¬èº«çš„åç§°

print(bs.a.attrs)# æŠŠ a æ ‡ç­¾çš„æ‰€æœ‰å±æ€§æ‰“å°è¾“å‡ºäº†å‡ºæ¥ï¼Œå¾—åˆ°çš„ç±»å‹æ˜¯ä¸€ä¸ªå­—å…¸ã€‚

print(bs.a['class']) # ç­‰ä»· bs.a.get('class')

bs.a['class'] = &quot;newClass&quot;# å¯ä»¥å¯¹è¿™äº›å±æ€§å’Œå†…å®¹ç­‰ç­‰è¿›è¡Œä¿®æ”¹

del bs.a['class']# å¯¹è¿™ä¸ªå±æ€§è¿›è¡Œåˆ é™¤

</code></pre>
<h5 id="navigablestring">NavigableString</h5>
<pre><code class="language-python">from bs4 import BeautifulSoup
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html,&quot;html.parser&quot;)
print(bs.title.string)    #è·å–æ ‡ç­¾å†…éƒ¨çš„æ–‡å­—
print(type(bs.title.string))
</code></pre>
<h5 id="beautifulsoup">BeautifulSoup</h5>
<p>BeautifulSoupå¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ–‡æ¡£çš„å†…å®¹ã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼Œå¯ä»¥æŠŠå®ƒå½“ä½œ Tag å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Tagï¼Œæˆ‘ä»¬å¯ä»¥åˆ†åˆ«è·å–å®ƒçš„ç±»å‹ï¼Œåç§°ï¼Œä»¥åŠå±æ€§</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html,&quot;html.parser&quot;)
print(type(bs.name))
print(bs.name)
print(bs.attrs)
{'class': ['mnav'], 'href': 'http://news.baidu.com', 'name': 'tj_trnews'}
</code></pre>
<h5 id="comment">Comment</h5>
<p>Comment å¯¹è±¡æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„ NavigableString å¯¹è±¡ï¼Œå…¶è¾“å‡ºçš„å†…å®¹ä¸åŒ…æ‹¬æ³¨é‡Šç¬¦å·</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html,&quot;html.parser&quot;)
print(bs.a)
# æ­¤æ—¶ä¸èƒ½å‡ºç°ç©ºæ ¼å’Œæ¢è¡Œç¬¦ï¼Œaæ ‡ç­¾å¦‚ä¸‹ï¼š
# &lt;a class=&quot;mnav&quot; href=&quot;http://news.baidu.com&quot; name=&quot;tj_trnews&quot;&gt;&lt;!--æ–°é—»--&gt;&lt;/a&gt;
print(bs.a.string) # æ–°é—»
print(type(bs.a.string)) # &lt;class 'bs4.element.Comment'&gt;
</code></pre>
<h4 id="éå†æ–‡æ¡£æ ‘">éå†æ–‡æ¡£æ ‘</h4>
<p>5.1 .contentsï¼šè·å–Tagçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªlist</p>
<pre><code class="language-python"># tagçš„.content å±æ€§å¯ä»¥å°†tagçš„å­èŠ‚ç‚¹ä»¥åˆ—è¡¨çš„æ–¹å¼è¾“å‡º
print(bs.head.contents)
# ç”¨åˆ—è¡¨ç´¢å¼•æ¥è·å–å®ƒçš„æŸä¸€ä¸ªå…ƒç´ 
print(bs.head.contents[1])
</code></pre>
<p>5.2 .childrenï¼šè·å–Tagçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨</p>
<pre><code class="language-python">for child in bs.body.children:
print(child)
</code></pre>
<blockquote>
<p>5.3ã€.descendantsï¼šè·å–Tagçš„æ‰€æœ‰å­å­™èŠ‚ç‚¹</p>
<p>5.4ã€.stringsï¼šå¦‚æœTagåŒ…å«å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå³åœ¨å­å­™èŠ‚ç‚¹ä¸­æœ‰å†…å®¹ï¼Œå¯ä»¥ç”¨æ­¤è·å–ï¼Œè€Œåè¿›è¡Œéå†</p>
<p>5.5ã€.stripped_stringsï¼šä¸stringsç”¨æ³•ä¸€è‡´ï¼Œåªä¸è¿‡å¯ä»¥å»é™¤æ‰é‚£äº›å¤šä½™çš„ç©ºç™½å†…å®¹</p>
<p>5.6ã€.parentï¼šè·å–Tagçš„çˆ¶èŠ‚ç‚¹</p>
<p>5.7ã€.parentsï¼šé€’å½’å¾—åˆ°çˆ¶è¾ˆå…ƒç´ çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨</p>
<p>5.8ã€.previous_siblingï¼šè·å–å½“å‰Tagçš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå±æ€§é€šå¸¸æ˜¯å­—ç¬¦ä¸²æˆ–ç©ºç™½ï¼ŒçœŸå®ç»“æœæ˜¯å½“å‰æ ‡ç­¾ ä¸ä¸Šä¸€ä¸ªæ ‡ç­¾ä¹‹é—´çš„é¡¿å·å’Œæ¢è¡Œç¬¦</p>
<p>5.9ã€.next_siblingï¼šè·å–å½“å‰Tagçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå±æ€§é€šå¸¸æ˜¯å­—ç¬¦ä¸²æˆ–ç©ºç™½ï¼ŒçœŸæ˜¯ç»“æœæ˜¯å½“å‰æ ‡ç­¾ä¸ä¸‹ ä¸€ä¸ªæ ‡ç­¾ä¹‹é—´çš„é¡¿å·ä¸æ¢è¡Œç¬¦</p>
<p>5.10ã€.previous_siblingsï¼šè·å–å½“å‰Tagçš„ä¸Šé¢æ‰€æœ‰çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨</p>
<p>5.11ã€.next_siblingsï¼šè·å–å½“å‰Tagçš„ä¸‹é¢æ‰€æœ‰çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨</p>
<p>5.12ã€.previous_elementï¼šè·å–è§£æè¿‡ç¨‹ä¸­ä¸Šä¸€ä¸ªè¢«è§£æçš„å¯¹è±¡(å­—ç¬¦ä¸²æˆ–tag)ï¼Œå¯èƒ½ä¸ previous_siblingç›¸åŒï¼Œä½†é€šå¸¸æ˜¯ä¸ä¸€æ ·çš„</p>
<p>5.13ã€.next_elementï¼šè·å–è§£æè¿‡ç¨‹ä¸­ä¸‹ä¸€ä¸ªè¢«è§£æçš„å¯¹è±¡(å­—ç¬¦ä¸²æˆ–tag)ï¼Œå¯èƒ½ä¸next_siblingç›¸åŒï¼Œ ä½†é€šå¸¸æ˜¯ä¸ä¸€æ ·çš„</p>
<p>5.14ã€.previous_elementsï¼šè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¯ä»¥å‘å‰è®¿é—®æ–‡æ¡£çš„è§£æå†…å®¹</p>
<p>5.15ã€.next_elementsï¼šè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¯ä»¥å‘åè®¿é—®æ–‡æ¡£çš„è§£æå†…å®¹</p>
<p>5.16ã€.has_attrï¼šåˆ¤æ–­Tagæ˜¯å¦åŒ…å«å±æ€§</p>
</blockquote>
<h4 id="æœç´¢æ–‡æ¡£æ ‘">æœç´¢æ–‡æ¡£æ ‘</h4>
<p>find_all(name, attrs, recursive, text, **kwargs)</p>
<h5 id="nameå‚æ•°">nameå‚æ•°ï¼š</h5>
<p>å­—ç¬¦ä¸²è¿‡æ»¤ï¼šä¼šæŸ¥æ‰¾ä¸å­—ç¬¦ä¸²å®Œå…¨åŒ¹é…çš„å†…å®¹</p>
<pre><code class="language-python">a_list = bs.find_all(&quot;a&quot;)
print(a_list)
</code></pre>
<p>æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤ï¼šå¦‚æœä¼ å…¥çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆBeautifulSoup4ä¼šé€šè¿‡search()æ¥åŒ¹é…å†…å®¹</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
import re
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html,&quot;html.parser&quot;)
t_list = bs.find_all(re.compile(&quot;a&quot;))    #åˆ—è¡¨è¾“å‡ºæ‰€æœ‰å¸¦açš„æ ‡ç­¾
for item in t_list:
print(item)
</code></pre>
<h5 id="kwargså‚æ•°">kwargså‚æ•°ï¼š</h5>
<pre><code class="language-python">from bs4 import BeautifulSoup
import re
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html,&quot;html.parser&quot;)
# æŸ¥è¯¢id=headçš„Tag
t_list = bs.find_all(id=&quot;head&quot;)
print(t_list)
# æŸ¥è¯¢hrefå±æ€§åŒ…å«news.baidu.comçš„Tag
t_list = bs.find_all(href=re.compile(&quot;http://news.baidu.com&quot;))
print(t_list)
# æŸ¥è¯¢æ‰€æœ‰åŒ…å«classçš„Tag(æ³¨æ„ï¼šclassåœ¨Pythonä¸­å±äºå…³é”®å­—ï¼Œæ‰€ä»¥åŠ _ä»¥ç¤ºåŒºåˆ«)
t_list = bs.find_all(class_=True)
for item in t_list:
print(item)
</code></pre>
<h5 id="textå‚æ•°">textå‚æ•°ï¼š</h5>
<p>é€šè¿‡textå‚æ•°å¯ä»¥æœç´¢æ–‡æ¡£ä¸­çš„å­—ç¬¦ä¸²å†…å®¹ï¼Œä¸nameå‚æ•°çš„å¯é€‰å€¼ä¸€æ ·ï¼Œtextå‚æ•°æ¥å— å­—ç¬¦ä¸²ï¼Œæ­£åˆ™ è¡¨è¾¾å¼ï¼Œåˆ—è¡¨</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
import re
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html, &quot;html.parser&quot;)
t_list = bs.find_all(attrs={&quot;data-foo&quot;: &quot;value&quot;})
for item in t_list:
print(item)
t_list = bs.find_all(text=&quot;hao123&quot;)
for item in t_list:
print(item)
t_list = bs.find_all(text=[&quot;hao123&quot;, &quot;åœ°å›¾&quot;, &quot;è´´å§&quot;])
for item in t_list:
print(item)
t_list = bs.find_all(text=re.compile(&quot;\d&quot;))    #å¸¦æœ‰æ•°å­—çš„å†…å®¹
for item in t_list:
print(item)
</code></pre>
<p>å½“æˆ‘ä»¬æœç´¢textä¸­çš„ä¸€äº›ç‰¹æ®Šå±æ€§æ—¶ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ–¹æ³•æ¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼š</p>
<pre><code class="language-python">def length_is_two(text):
return text and len(text) == 2
t_list = bs.find_all(text=length_is_two)
for item in t_list:
print(item)
</code></pre>
<h5 id="limitå‚æ•°">limitå‚æ•°ï¼š</h5>
<p>å¯ä»¥ä¼ å…¥ä¸€ä¸ªlimitå‚æ•°æ¥é™åˆ¶è¿”å›çš„æ•°é‡ï¼Œå½“æœç´¢å‡ºçš„æ•°æ®é‡ä¸º5ï¼Œè€Œè®¾ç½®äº†limit=2æ—¶ï¼Œæ­¤æ—¶åªä¼šè¿”å› å‰2ä¸ªæ•°æ®</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
import re
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html, &quot;html.parser&quot;)
t_list = bs.find_all(&quot;a&quot;,limit=2)
for item in t_list:
print(item)
</code></pre>
<p>find_allé™¤äº†ä¸Šé¢ä¸€äº›å¸¸è§„çš„å†™æ³•ï¼Œè¿˜å¯ä»¥å¯¹å…¶è¿›è¡Œä¸€äº›ç®€å†™ï¼š</p>
<pre><code class="language-python"># ä¸¤è€…æ˜¯ç›¸ç­‰çš„
# t_list = bs.find_all(&quot;a&quot;) =&gt; t_list = bs(&quot;a&quot;)
t_list = bs(&quot;a&quot;) # ä¸¤è€…æ˜¯ç›¸ç­‰çš„
# t_list = bs.a.find_all(text=&quot;æ–°é—»&quot;) =&gt; t_list = bs.a(text=&quot;æ–°é—»&quot;)
t_list = bs.a(text=&quot;æ–°é—»&quot;)
</code></pre>
<p>find()</p>
<p>find()å°†è¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªTagï¼Œæœ‰æ—¶æˆ‘ä»¬åªéœ€è¦æˆ–ä¸€ä¸ªTagæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨åˆ°find()æ–¹æ³•äº†ã€‚å½“ç„¶ äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨find_all()æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªlimit=1ï¼Œç„¶åå†å–å‡ºç¬¬ä¸€ä¸ªå€¼ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡æœªå…ç¹çã€‚</p>
<pre><code class="language-python">from bs4 import BeautifulSoup
import re
file = open('./aa.html', 'rb')
html = file.read()
bs = BeautifulSoup(html, &quot;html.parser&quot;)
# è¿”å›åªæœ‰ä¸€ä¸ªç»“æœçš„åˆ—è¡¨
t_list = bs.find_all(&quot;title&quot;,limit=1)
print(t_list)
# è¿”å›å”¯ä¸€å€¼
t = bs.find(&quot;title&quot;)
print(t)
# å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å›None
t = bs.find(&quot;abc&quot;) print(t)
#ä»ç»“æœå¯ä»¥çœ‹å‡ºfind_allï¼Œå°½ç®¡ä¼ å…¥äº†limit=1ï¼Œä½†æ˜¯è¿”å›å€¼ä»ç„¶ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œå½“æˆ‘ä»¬åªéœ€è¦å–ä¸€ä¸ªå€¼æ—¶ï¼Œè¿œä¸å¦‚findæ–¹æ³•æ–¹ä¾¿ã€‚ä½†æ˜¯å¦‚æœæœªæœç´¢åˆ°å€¼æ—¶ï¼Œå°†è¿”å›ä¸€ä¸ªNone
</code></pre>
<h4 id="cssé€‰æ‹©å™¨">CSSé€‰æ‹©å™¨</h4>
<p>BeautifulSoupæ”¯æŒå‘éƒ¨åˆ†çš„CSSé€‰æ‹©å™¨ï¼Œåœ¨Tagè·å–BeautifulSoupå¯¹è±¡çš„.select()æ–¹æ³•ä¸­ä¼ å…¥å­—ç¬¦ä¸²å‚ æ•°ï¼Œå³å¯ä½¿ç”¨CSSé€‰æ‹©å™¨çš„è¯­æ³•æ‰¾åˆ°Tag:</p>
<p>7.1ã€é€šè¿‡æ ‡ç­¾åæŸ¥æ‰¾</p>
<pre><code class="language-python">print(bs.select('title'))
print(bs.select('a'))
</code></pre>
<p>7.2ã€é€šè¿‡ç±»åæŸ¥æ‰¾</p>
<p>print(bs.select('.mnav'))    #.å¯¹åº”class</p>
<p>7.3ã€é€šè¿‡idæŸ¥æ‰¾</p>
<p>print(bs.select('#u1'))    ##å¯¹åº”id</p>
<p>7.4ã€ç»„åˆæŸ¥æ‰¾</p>
<p>print(bs.select('div .bri'))    #divæ ‡ç­¾å†…idä¸ºbri</p>
<p>7.5ã€å±æ€§æŸ¥æ‰¾</p>
<p>print(bs.select('a[class=&quot;bri&quot;]'))</p>
<p>print(bs.select('a[href=&quot;http://tieba.baidu.com&quot;]'))</p>
<p>7.6ã€ç›´æ¥å­æ ‡ç­¾æŸ¥æ‰¾</p>
<p>t_list = bs.select(&quot;head &gt; title&quot;)</p>
<p>print(t_list)</p>
<p>7.7ã€å…„å¼ŸèŠ‚ç‚¹æ ‡ç­¾æŸ¥æ‰¾</p>
<p>t_list = bs.select(&quot;.mnav ~ .bri&quot;)</p>
<p>print(t_list)</p>
<p>7.8ã€è·å–å†…å®¹</p>
<p>t_list = bs.select(&quot;title&quot;)</p>
<p>print(bs.select('title')[0].get_text())    #è·å–titleæ ‡ç­¾å†…çš„å†…å®¹</p>
<h3 id="reæ¨¡å—">reæ¨¡å—</h3>
<h4 id="æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨æ“ä½œç¬¦">æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨æ“ä½œç¬¦</h4>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>è¯´æ˜</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>è¡¨ç¤ºä»»ä½•å•ä¸ªå­—ç¬¦</td>
<td></td>
</tr>
<tr>
<td>[ ]</td>
<td>å­—ç¬¦é›†ï¼Œå¯¹å•ä¸ªå­—ç¬¦ç»™äºˆå–å€¼èŒƒå›´</td>
<td>[abc]è¡¨ç¤ºa,b,cï¼Œ[a-z]è¡¨ç¤ºaåˆ°zå•ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>[^ ]</td>
<td>éå­—ç¬¦é›†ï¼Œå¯¹å•ä¸ªå­—ç¬¦ç»™å‡ºå–å€¼èŒƒå›´</td>
<td>[^abc]è¡¨ç¤ºéaæˆ–bæˆ–cçš„å•ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>*</td>
<td>å‰ä¸€ä¸ªå­—ç¬¦<code>0</code>æ¬¡æˆ–æ— é™æ¬¡æ‰©å±•</td>
<td>abc*è¡¨ç¤ºab,abc,abcc,abcccç­‰</td>
</tr>
<tr>
<td>+</td>
<td>å‰ä¸€ä¸ªå­—ç¬¦<code>1</code>æ¬¡æˆ–æ— é™æ¬¡æ‰©å±•</td>
<td>abc+è¡¨ç¤ºabc,abcc,abcccç­‰</td>
</tr>
<tr>
<td>ï¼Ÿ</td>
<td>å‰ä¸€ä¸ªå­—ç¬¦0æ¬¡æˆ–1æ¬¡æ‰©å±•</td>
<td>abc?è¡¨ç¤ºab,abc</td>
</tr>
<tr>
<td>|</td>
<td>å·¦å³è¡¨è¾¾å¼ä»»æ„ä¸€ä¸ª</td>
<td>abc|defè¡¨ç¤ºabc,def</td>
</tr>
<tr>
<td>{m}</td>
<td>æ‰©å±•å‰ä¸€ä¸ªå­—ç¬¦mæ¬¡</td>
<td>ab{2}cè¡¨ç¤ºabbc</td>
</tr>
<tr>
<td>{m,n}</td>
<td>æ‰©å±•å‰ä¸€ä¸ªå­—ç¬¦mè‡³næ¬¡ï¼ˆå«nï¼‰</td>
<td>ab{1,3}cè¡¨ç¤ºabc,abbc,abbbc</td>
</tr>
<tr>
<td>^</td>
<td>åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´</td>
<td>^abcè¡¨ç¤ºabcä¸”åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´</td>
</tr>
<tr>
<td>$</td>
<td>åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾</td>
<td>abc$è¡¨ç¤ºabcä¸”åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„ç»“å°¾</td>
</tr>
<tr>
<td>( )</td>
<td>åˆ†ç»„æ ‡è®°ï¼Œå†…éƒ¨å¯ä½¿ç”¨|æ“ä½œç¬¦</td>
<td>(abc)è¡¨ç¤ºabc ,(abc|def)è¡¨ç¤ºabcï¼Œdef</td>
</tr>
<tr>
<td>\d</td>
<td>æ•°å­—ï¼Œç­‰ä»·äº[0-9]</td>
<td></td>
</tr>
<tr>
<td>\w</td>
<td>å•è¯å­—ç¬¦ï¼Œç­‰ä»·äº[A-Z]/[a-z]/[0-9]/_</td>
<td>ç½‘ç«™æ³¨å†Œç”¨æˆ·å(åªèƒ½ä½¿ç”¨å¤§å°å†™å­—æ¯æ•°å­—å’Œä¸‹åˆ’çº¿ )</td>
</tr>
</tbody>
</table>
<blockquote>
<p>â€œ?â€ ï¼š0æ¬¡æˆ–1æ¬¡ï¼Œmatch,search ä¸ä¼šå‡ºç°noneï¼Œä¼šå‡ºç°â€™ â€˜ ï¼ˆå› ä¸º0æ¬¡ä¹Ÿæ˜¯ç¬¦åˆçš„ï¼‰ 0æ¬¡æˆ–1æ¬¡ä¸æ˜¯æŒ‡[xxx]è¿™ä¸ªé›†åˆï¼Œè€Œæ˜¯å…¶ä¸­çš„ä»»ä½•çš„ä¸€ä¸ªå­—ç¬¦</p>
<pre><code class="language-python">pat = re.compile( [abc]? )
pat.match( defabc ).group() #0æ¬¡
pat.match( abcdefabc ).group()
&gt;&gt;&gt; a
pat.search( defabc ).group() #0æ¬¡
pat.findall( defabc ) #0æ¬¡å’Œ1æ¬¡
&gt;&gt;&gt; [ , , , a , b , c , ]
</code></pre>
<p>â€œæ•°é‡è¯?â€ ï¼š<code>éè´ªå©ªæ¨¡å¼</code>ï¼šåªåŒ¹é…æœ€å°‘çš„ï¼ˆå°½å¯èƒ½å°‘ï¼‰ï¼›é»˜è®¤è´ªå©ªæ¨¡å¼ï¼šåŒ¹é…æœ€å¤šçš„ï¼ˆå°½å¯èƒ½å¤šï¼‰</p>
<pre><code class="language-python">pat = re.compile( [abc]+ ) #è´ªå©ªæ¨¡å¼
&gt;&gt;&gt; pat.match( abcdefabcabc ).group() #åŒ¹é…å°½å¯èƒ½å¤šçš„ï¼šabc
&gt;&gt;&gt; abc
&gt;&gt;&gt; pat.match( bbabcdefabcabc ).group()
&gt;&gt;&gt; bbabc
&gt;&gt;&gt; pat.search( dbbabcdefabcabc ).group()
&gt;&gt;&gt; bbabc
&gt;&gt;&gt; pat.findall( abcdefabcabc )
&gt;&gt;&gt; [ abc , abcabc ]
&gt;&gt;&gt; pat = re.compile( [abc]+? ) #éè´ªå©ªæ¨¡å¼ï¼š+?
&gt;&gt;&gt; pat.match( abcdefabcabc ).group() #åŒ¹é…å°½å¯èƒ½å°‘çš„ï¼šaã€bã€c
&gt;&gt;&gt; a
&gt;&gt;&gt; pat.search( dbbabcdefabcabc ).group()
&gt;&gt;&gt; b
&gt;&gt;&gt; pat.findall( abcdefabcabc )
&gt;&gt;&gt; [ a , b , c , a , b , c , a , b , c ]
</code></pre>
</blockquote>
<h4 id="reåº“ä¸»è¦åŠŸèƒ½å‡½æ•°">Reåº“ä¸»è¦åŠŸèƒ½å‡½æ•°</h4>
<table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>re.search()</td>
<td>åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å›½æœç´¢åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œ<code>è¿”å›matchå¯¹è±¡</code></td>
</tr>
<tr>
<td>re.match()</td>
<td>ä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®èµ·åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>è¿”å›matchå¯¹è±¡</code></td>
</tr>
<tr>
<td>re.findall()</td>
<td>æœç´¢å­—ç¬¦ä¸²ï¼Œä»¥åˆ—è¡¨ç±»å‹è¿”å›å…¨éƒ¨èƒ½åŒ¹é…çš„å­ä¸²</td>
</tr>
<tr>
<td>re.split()</td>
<td>å°†ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç»“æœè¿›è¡Œåˆ†éš”ï¼Œè¿”å›åˆ—è¡¨ç±»å‹</td>
</tr>
<tr>
<td>re.finditer()</td>
<td>æœç´¢å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªåŒ¹é…ç»“æœçš„è¿­ä»£ç±»å‹ï¼Œ<code>æ¯ä¸ªè¿­ä»£å¯¹è±¡æ˜¯matchå¯¹è±¡</code></td>
</tr>
<tr>
<td>re.sub()</td>
<td>åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ›¿æ¢æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­ä¸²ï¼Œè¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åŒ…å«ä¸€äº›å¯é€‰æ ‡å¿—ä¿®é¥°ç¬¦æ¥æ§åˆ¶åŒ¹é…çš„æ¨¡å¼ã€‚ä¿®é¥°ç¬¦è¢«æŒ‡å®šä¸ºä¸€ä¸ªå¯é€‰çš„æ ‡å¿—ã€‚ å¤šä¸ªæ ‡å¿—å¯ä»¥é€šè¿‡æŒ‰ä½ OR(|) å®ƒä»¬æ¥æŒ‡å®šã€‚å¦‚ re.I | re.M è¢«è®¾ç½®æˆ I å’Œ M æ ‡å¿—ï¼š</p>
<table>
<thead>
<tr>
<th>ä¿®é¥°ç¬¦</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>re.I</td>
<td>ä½¿åŒ¹é…å¯¹å¤§å°å†™ä¸æ•æ„Ÿ</td>
</tr>
<tr>
<td>re.L</td>
<td>åšæœ¬åœ°åŒ–è¯†åˆ«ï¼ˆlocale-awareï¼‰åŒ¹é…</td>
</tr>
<tr>
<td>re.M</td>
<td>å¤šè¡ŒåŒ¹é…ï¼Œå½±å“ ^ å’Œ $</td>
</tr>
<tr>
<td>re.S</td>
<td>ä½¿ . åŒ¹é…åŒ…æ‹¬æ¢è¡Œåœ¨å†…çš„æ‰€æœ‰å­—ç¬¦</td>
</tr>
<tr>
<td>re.U</td>
<td>æ ¹æ®Unicodeå­—ç¬¦é›†è§£æå­—ç¬¦ã€‚è¿™ä¸ªæ ‡å¿—å½±å“ \w, \W, \b, \B.</td>
</tr>
<tr>
<td>re.X</td>
<td>è¯¥æ ‡å¿—é€šè¿‡ç»™äºˆä½ æ›´çµæ´»çš„æ ¼å¼ä»¥ä¾¿ä½ å°†æ­£åˆ™è¡¨è¾¾å¼å†™å¾—æ›´æ˜“äºç†è§£ã€‚</td>
</tr>
</tbody>
</table>
</blockquote>
<h5 id="å‡½æ•°å…·ä½“ç”¨æ³•">å‡½æ•°å…·ä½“ç”¨æ³•</h5>
<h6 id="compilepatternåˆ›å»ºæ¨¡å¼å¯¹è±¡">compile(pattern)ï¼šåˆ›å»ºæ¨¡å¼å¯¹è±¡</h6>
<pre><code class="language-python">import re
pat=re.compile(&quot;A&quot;)
#m=pat.search(&quot;CBA&quot;)
m=pat.search(&quot;ABC&quot;)
#ç­‰ä»·äº re.search( A , CBA )
print(m)
#&lt;re.Match object; span=(2, 3), match='A'&gt; è¡¨ç¤ºåŒ¹é…åˆ°äº†
m=pat.search(&quot;CBD&quot;)
print(m) #None è¡¨ç¤ºæ²¡åŒ¹é…åˆ°
</code></pre>
<h6 id="searchpatternstringåœ¨å­—ç¬¦ä¸²ä¸­å¯»æ‰¾æ¨¡å¼">search(pattern,string)ï¼šåœ¨å­—ç¬¦ä¸²ä¸­å¯»æ‰¾æ¨¡å¼</h6>
<pre><code class="language-python">import re
m = re.search(&quot;asd&quot; , &quot;ASDasd&quot; )
print(m)
# &lt;_sre.SRE_Match object at 0xb72cd6e8&gt; #åŒ¹é…åˆ°äº†ï¼Œè¿”å›MatchObjectï¼ˆTrueï¼‰
m = re.search(&quot;asd&quot; , &quot;ASDASD&quot; )
print(m)     #è¡¨ç¤ºæ²¡åŒ¹é…åˆ°è¿”å›None(False)
</code></pre>
<h6 id="matchpatternstringåœ¨å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æ¨¡å¼">match(pattern,string)ï¼šåœ¨å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æ¨¡å¼</h6>
<pre><code class="language-python"># ç­‰ä»·äº
pat=re.compile( &quot;a&quot; )
print(pat.match( &quot;Aasd&quot; ))
#è¾“å‡ºNone
print(pat.match(&quot;aASD&quot; ))
#è¾“å‡º &lt;_sre.SRE_Match object at 0xb72cd6e8&gt;
# ä¸Šé¢çš„å‡½æ•°è¿”å›éƒ½å¯ä»¥åœ¨ifæ¡ä»¶è¯­å¥ä¸­è¿›è¡Œåˆ¤æ–­ï¼š
if pat.search(&quot;asd&quot;):
print (&quot;OK&quot;) #OK #æ‰¾åˆ°è¿”å›
if re.search(&quot;a&quot;,&quot;ASD&quot; ):
print (&quot;OK&quot;) #æ²¡æœ‰æ‰¾åˆ°
</code></pre>
<h6 id="splitpatternstringæ ¹æ®æ¨¡å¼åˆ†å‰²å­—ç¬¦ä¸²è¿”å›åˆ—è¡¨">split(pattern,string)ï¼šæ ¹æ®æ¨¡å¼åˆ†å‰²å­—ç¬¦ä¸²,è¿”å›åˆ—è¡¨</h6>
<pre><code class="language-python">re.split( , , a,s,d,asd )
[ a , s , d , asd ] #è¿”å›åˆ—è¡¨
pat = re.compile( , )
pat.split( a,s,d,asd )
[ a , s , d , asd ] #è¿”å›åˆ—è¡¨
re.split( [, ]+ , a , s ,d ,,,,,asd ) #æ­£åˆ™åŒ¹é…ï¼š[, ]+
[ a , s , d , asd ]
re.split( [, ]+ , a , s ,d ,,,,,asd ,maxsplit=2) # maxsplit æœ€å¤šåˆ†å‰²æ¬¡æ•°
[ a , s , d ,,,,,asd ]
pat = re.compile( [, ]+ ) #æ­£åˆ™åŒ¹é…ï¼š[, ]+
pat.split( a , s ,d ,,,,,asd ,maxsplit=2) # maxsplit æœ€å¤šåˆ†å‰²æ¬¡æ•°
[ a , s , d ,,,,,asd ]
</code></pre>
<h6 id="findallpatternstringåˆ—è¡¨å½¢å¼è¿”å›åŒ¹é…é¡¹">findall(pattern,string)ï¼šåˆ—è¡¨å½¢å¼è¿”å›åŒ¹é…é¡¹</h6>
<pre><code class="language-python">import re
print(re.findall( &quot;a&quot; , &quot;ASDaDFGAa&quot; ))
#[ a , a ] #åˆ—è¡¨å½¢å¼è¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²
pat = re.compile( &quot;a&quot; )
print(pat.findall( &quot;ASDaDFGAa&quot; ))
#[ a , a ] #åˆ—è¡¨å½¢å¼è¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²
pat = re.compile( &quot;[A-Z]+&quot; ) #æ­£åˆ™åŒ¹é…ï¼š[A-Z]+ å‰ä¸€ä¸ªå­—ç¬¦`1`æ¬¡æˆ–æ— é™æ¬¡æ‰©å±•
print(pat.findall( &quot;ASDcDFGAa&quot; ))
#[ ASD , DFGA ] #æ‰¾åˆ°åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²
pat = re.compile( [A-Z] )
pat.findall( ASDcDFGAa )
[ A , S , D , D , F , G , A ] #æ‰¾åˆ°åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²
pat = re.compile( [A-Za-z] ) #æ­£åˆ™åŒ¹é…ï¼š[A-Za-z]+ åŒ¹é…æ‰€æœ‰å­—æ¯
pat.findall( ASDcDFGAa )
[ A , S , D , c , D , F , G , A , a ]
</code></pre>
<h6 id="subpatreplstring-ç”¨replæ›¿æ¢-patåŒ¹é…é¡¹-ç•™çš„æ˜¯ä¸­é—´çš„å› ä¸ºä¸­é—´åœ¨ä¸­å¿ƒ">sub(pat,repl,string) ï¼šç”¨replæ›¿æ¢ patåŒ¹é…é¡¹ (ç•™çš„æ˜¯ä¸­é—´çš„ï¼Œå› ä¸ºä¸­é—´åœ¨ä¸­å¿ƒ)</h6>
<pre><code class="language-python">re.sub( a , A , abcasd ) #æ‰¾åˆ°aç”¨Aæ›¿æ¢ï¼Œåé¢è§å’Œgroupçš„é…åˆä½¿ç”¨
AbcAsd
pat = re.compile( a )
pat.sub( A , abcasd )
AbcAsd
pat=re.compile(r www.(.*)..{3} ) #æ­£åˆ™è¡¨è¾¾å¼
#åœ¨Pythonçš„stringå‰é¢åŠ ä¸Šâ€˜râ€™ï¼Œ æ˜¯ä¸ºäº†å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªstringæ˜¯ä¸ªraw stringï¼Œä¸è¦è½¬è¯‘åæ–œæ 
#ä¾‹å¦‚ï¼Œ åœ¨raw stringä¸­ï¼Œæ˜¯ä¸¤ä¸ªå­—ç¬¦ï¼Œå’Œnï¼Œ è€Œä¸ä¼šè½¬è¯‘ä¸ºæ¢è¡Œç¬¦ã€‚
#ç”±äºæ­£åˆ™è¡¨è¾¾å¼å’Œ ä¼šæœ‰å†²çªï¼Œå› æ­¤ï¼Œå½“ä¸€ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼åï¼Œæœ€å¥½åœ¨å‰é¢åŠ ä¸Š r ã€‚
#ä¸å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ç›¸åŒï¼Œæ­£åˆ™è¡¨è¾¾å¼é‡Œä½¿ç”¨&quot;&quot;ä½œä¸ºè½¬ä¹‰å­—ç¬¦ï¼Œè¿™å°±å¯èƒ½é€ æˆåæ–œæ å›°æ‰°ã€‚
#å‡å¦‚ä½ éœ€è¦åŒ¹é…æ–‡æœ¬ä¸­çš„å­—ç¬¦&quot;&quot;ï¼Œé‚£ä¹ˆä½¿ç”¨ç¼–ç¨‹è¯­è¨€è¡¨ç¤ºçš„æ­£åˆ™è¡¨è¾¾å¼é‡Œå°†éœ€è¦4ä¸ªåæ–œæ &quot;\\&quot;ï¼š
#å‰ä¸¤ä¸ªå’Œåä¸¤ä¸ªåˆ†åˆ«ç”¨äºåœ¨ç¼–ç¨‹è¯­è¨€é‡Œè½¬ä¹‰æˆåæ–œæ ï¼Œè½¬æ¢æˆä¸¤ä¸ªåæ–œæ åå†åœ¨æ­£åˆ™è¡¨è¾¾å¼é‡Œè½¬ä¹‰æˆä¸€ä¸ªåæ–œæ ã€‚
#Pythoné‡Œçš„åŸç”Ÿå­—ç¬¦ä¸²å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªä¾‹å­ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨r&quot;\&quot;è¡¨ç¤ºã€‚
#åŒæ ·ï¼ŒåŒ¹é…ä¸€ä¸ªæ•°å­—çš„&quot;\d&quot;å¯ä»¥å†™æˆr&quot;d&quot;ã€‚
#æœ‰äº†åŸç”Ÿå­—ç¬¦ä¸²ï¼Œä½ å†ä¹Ÿä¸ç”¨æ‹…å¿ƒæ˜¯ä¸æ˜¯æ¼å†™äº†åæ–œæ ï¼Œå†™å‡ºæ¥çš„è¡¨è¾¾å¼ä¹Ÿæ›´ç›´è§‚ã€‚
#ä¸æ˜¯è¯´ åŠ äº†r å°±æ²¡æœ‰è½¬è¯‘åŠŸèƒ½ï¼Œå¥½ä¹±ï¼Œå°±ç›´æ¥è®°ä½1å¥è¯ï¼š
#å½“ä¸€ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼åï¼Œæœ€å¥½åœ¨å‰é¢åŠ ä¸Š r ï¼Œè¿™æ ·ä½ å†ä¹Ÿä¸ç”¨æ‹…å¿ƒæ˜¯ä¸æ˜¯æ¼å†™äº†åæ–œæ ï¼Œå†™å‡ºæ¥çš„è¡¨è¾¾å¼ä¹Ÿæ›´ç›´è§‚
pat.match( www.dxy.com ).group(1)
dxy
re.sub(r www.(.*)..{3} ,r , hello,www.dxy.com )
pat.sub(r , hello,www.dxy.com )
hello,dxy
# r 1 æ˜¯ç¬¬ä¸€ç»„çš„æ„æ€
#é€šè¿‡æ­£åˆ™åŒ¹é…æ‰¾åˆ°ç¬¦åˆè§„åˆ™çš„&quot;www.dxy.com&quot; ï¼Œå–å¾— ç»„1å­—ç¬¦ä¸² å»æ›¿æ¢ æ•´ä¸ªåŒ¹é…ã€‚
pat=re.compile(r (w+) (w+) ) #æ­£åˆ™è¡¨è¾¾å¼
s= hello world ! hello hz !
pat.findall( hello world ! hello hz ! )
[( hello , world ), ( hello , hz )]
pat.sub(r ,s) #é€šè¿‡æ­£åˆ™å¾—åˆ°ç»„1(hello)ï¼Œç»„2(world)ï¼Œå†é€šè¿‡subå»æ›¿æ¢ã€‚
å³ç»„1æ›¿æ¢ç»„2ï¼Œç»„2æ›¿æ¢ç»„1ï¼Œè°ƒæ¢ä½ç½®ã€‚
world hello!hz hello!
</code></pre>
<h3 id="xlwtæ¨¡å—">xlwtæ¨¡å—</h3>
<pre><code class="language-python">import xlwt #å¯¼å…¥æ¨¡å—
workbook = xlwt.Workbook(encoding='utf-8') #åˆ›å»ºworkbook å¯¹è±¡
worksheet = workbook.add_sheet('sheet1') #åˆ›å»ºå·¥ä½œè¡¨sheet
worksheet.write(0, 0, 'hello') #å¾€è¡¨ä¸­å†™å†…å®¹,ç¬¬ä¸€å„å‚æ•° è¡Œ,ç¬¬äºŒä¸ªå‚æ•°åˆ—,ç¬¬ä¸‰ä¸ªå‚æ•°å†…å®¹
workbook.save('students.xls') #ä¿å­˜è¡¨ä¸ºstudents.xls
</code></pre>
<p>å°†ä¹ä¹ä¹˜æ³•è¡¨æ˜¾ç¤ºåœ¨è¡¨æ ¼ä¸­ï¼Œæ¯ä¸ªå•å…ƒæ ¼1ä¸ªå…¬å¼</p>
<pre><code class="language-python">workbook = xlwt.Workbook(encoding='utf-8') #åˆ›å»ºworkbook å¯¹è±¡
worksheet = workbook.add_sheet('sheet1') #åˆ›å»ºå·¥ä½œè¡¨sheet
for i in range(0,9):
for j in range(0,i+1):
worksheet.write(i, j, &quot;%d * %d = %d&quot;%(i+1,j+1,(i+1)*(j+1)))
# worksheet.write(0, 0, 'hello') #å¾€è¡¨ä¸­å†™å†…å®¹,ç¬¬ä¸€å„å‚æ•° è¡Œ,ç¬¬äºŒä¸ªå‚æ•°åˆ—,ç¬¬ä¸‰ä¸ªå‚æ•°å†…å®¹
workbook.save('students.xls') #ä¿å­˜è¡¨ä¸ºstudents.xls
</code></pre>

          </div>
        </div>

        
      </div>

      

      <div class="site-footer">
  <div class="slogan">This is a site I use to store my notes</div>
  <div class="social-container">
    
      
        <a href="https://github.com/Briz-519" target="_blank">
          <i class="fab fa-github"></i>
        </a>
      
    
      
    
      
        <a href="https://weibo.com/5672564737/profile?topnav=1&amp;wvr=6" target="_blank">
          <i class="fab fa-weibo"></i>
        </a>
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://briz-519.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
